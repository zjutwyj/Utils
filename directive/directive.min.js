app.directive("datetimepicker",function(){return{restrict:"A",require:"ngModel",link:function(e,i,n,t){i.datepicker({language:"zh-CN",dateFormat:"dd-MM-yy",autoclose:!0,todayHighlight:!0,todayBtn:!0,onSelect:function(i){e.$apply(function(){t.$setViewValue(i)})}})}}}),app.directive("imgcrop",function(){return{link:function(e,i,n){var t="true"===n.fill?!0:!1,r=n.width,a=n.height;i.bind("load",function(){var e=i[0].naturalWidth,n=i[0].naturalHeight;i.css(Est.imageCrop(e,n,r,a,t))})}}}),app.directive("clickToEdit",function(){var e='<div class="click-to-edit"><div ng-hide="view.editorEnabled">{{value}} <a ng-click="enableEditor()">编辑</a></div><div ng-show="view.editorEnabled"><input ng-model="view.editableValue"><a ng-click="save()">保存</a> or <a ng-click="disableEditor()">取消</a>.</div></div>';return{restrict:"A",replace:!0,template:e,scope:{value:"=clickToEdit"},controller:function(e){e.view={editableValue:e.value,editorEnabled:!1},e.enableEditor=function(){e.view.editorEnabled=!0,e.view.editableValue=e.value},e.disableEditor=function(){e.view.editorEnabled=!1},e.save=function(){e.value=e.view.editableValue,e.disableEditor()}}}}),app.directive("embedSrc",function(){return{restrict:"A",link:function(e,i,n){var t=i;e.$watch(function(){return n.embedSrc},function(){var e=i.clone().attr("src",n.embedSrc);t.replaceWith(e),t=e})}}}),app.directive("ngEnter",function(){return function(e,i,n){i.bind("keydown keypress",function(i){13===i.which&&(e.$apply(function(){e.$eval(n.ngEnter,{event:i})}),i.preventDefault())})}}),app.directive("ngFocus",function(){return{link:function(e,i){i[0].focus()}}}),app.directive("format",["$filter",function(e){return{require:"?ngModel",link:function(i,n,t,r){r&&(r.$formatters.unshift(function(){return e("number")(r.$modelValue)}),r.$parsers.unshift(function(i){switch(t.format){case"number":var r=i.replace(/\D/g,"");return n.val(e("number")(r)),r;case"phone":var a=i.replace(/^(\d{3,4})-?(\d{7,9})$/g,"$1-$2");return n.val(a),a;case"price":var o=i.replace(/[^\d|\-+|\.+]/g,"");return n.val(e("number")(o)),o}}))}}}]),app.directive("clipboard",["$rootScope",function(e){return function(i,n){var t=new ZeroClipboard(n,{moviePath:"vendor/zeroclipboard/ZeroClipboard.swf"});t.on("mousedown",function(n){n.on("complete",function(){i.ok?i.ok():e.showMsg("已复制到剪切板")})})}}]);