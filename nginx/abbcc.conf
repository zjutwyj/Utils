

       
	upstream  jihui88.com      
		{    
		#ip_hash;
		#server   localhost:7080;    
		server   localhost:8080;   
		#server   192.168.1.99:10080;
		}
	

    server {
        listen       80;
        server_name  jihui88.com www.jihui88.com;
	#server_name_in_redirect off;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   C:/Users/yongjin/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Abbcc;
            index  index.html index.htm index.jsp;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

	location ~ (\.jsp|^[^.]*|\.action)$
        {
              proxy_pass http://jihui88.com;
	      proxy_set_header X-Real-IP $remote_addr;
        }
	
	location ~ ^/home/template{
			root	C:/Users/yongjin/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Abbcc;
			index	index.htm index.html;
			error_page	404 = @templatelist;
			log_not_found	off;
		}

	location @templatelist{	
		proxy_pass http://jihui88.com;	
		proxy_set_header http_host $host;
		
		
		rewrite	^/home/template/list([^-]*)-([^-]*)-([^-]*)-([^-]*)\.html$ /home/template/list?category=$1&color=$2&cdesc=$3&page=$4 break;
	}
	rewrite ^/home/template/list(.*)\.html$ /home/template/list$1.html break;

	
	

	include rewrite.conf;
    }
    server {
        listen       80;
        server_name  talk.jihui88.com;
	#server_name_in_redirect off;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp4/wtpwebapps/talkdfwj;
            index  index.html index.htm index.jsp;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

	location ~ (\.jsp|^[^.]*|\.action)$
        {
              proxy_pass http://jihui88.com;
	      proxy_set_header X-Real-IP $remote_addr;
        }
    }

    server {
        listen       80;
        server_name  "~^(?<username>[^.]{4,})\.abbcc\.net$";
	
	location / {
		root	C:/Abbcc/vipsite/$username/html;
		index	index.htm index.html;
	}
	location ~ ^/search {
		root	 C:/Abbcc/vipsite/$username/html;
		index	index.htm index.html;
		error_page	404 = @search;
		log_not_found	off;
	}
	location @search {
		proxy_pass http://jihui88.com;	
		proxy_set_header http_host $host;
		rewrite	^/search/([^,]*),([^,]*),([^,]*)\.html$ /viplate/$username/search?keywords=$1&priceStart=$2&priceEnd=$3 break;
		rewrite	"^/search/([^;]*);([^;]*);([^;]*)\.html$" /rest/static/$username/search?keywords=$1&priceStart=$2&priceEnd=$3 break;
	}

	rewrite ^/([^-/]+)-([^-/]+)\.html$ /$1/$2.html last;
	rewrite ^/([^-/]+)-([^-/]+)-([^-/]+)\.html$ /$1/$2/$3.html last;

    }
    server {
        listen       80;
        server_name  "~^m\.(?<username>[^.]{4,})\.abbcc\.net$";
	
	location / {
		root	C:/Abbcc/vipsite/$username/mobile;
		index	index.htm index.html;
	}
	location ~ ^/search {
		root	C:/Abbcc/vipsite/$username/mobile;
		index	index.htm index.html;
		error_page	404 = @search;
		log_not_found	off;
	}
	location @search {
		proxy_pass http://jihui88.com;	
		proxy_set_header http_host $host;
		rewrite	^/search/(.*)\.html$ /mobile/$username/standardarch?searchName=$1 break;
		
	}
	rewrite ^/search-(.*)\.html$ /search/$1.html break;

    }
     server {
        listen       80;
        server_name  "~^ipad\.(?<username>[^.]{4,})\.abbcc\.net$";
	
	location / {
		root	C:/Abbcc/vipsite/$username/ipad;
		index	index.htm index.html;
	}
	location ~ ^/search {
		root	C:/Abbcc/vipsite/$username/ipad;
		index	index.htm index.html;
		error_page	404 = @search;
		log_not_found	off;
	}
	location @search {
		proxy_pass http://jihui88.com;	
		proxy_set_header http_host $host;
		rewrite	^/search/(.*)\.html$ /mobile/$username/standardarch?searchName=$1 break;
		
	}
	rewrite ^/search-(.*)\.html$ /search/$1.html break;
	rewrite ^/([^-/]+)-([^-/]+)\.html$ /$1/$2.html last;
	rewrite ^/([^-/]+)-([^-/]+)-([^-/]+)\.html$ /$1/$2/$3.html last;

    }
    server {
        listen       80;
        server_name  "~^(?<username>[^.]{2,3})\.abbcc\.net$";
	#server_name_in_redirect off;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   C:/Users/yongjin/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Abbcc;
            index  index.html index.htm index.jsp;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

	location ~ (\.jsp|^[^.]*|\.action)$
        {
              proxy_pass http://jihui88.com;
	      proxy_set_header X-Real-IP $remote_addr;
        }
    }
     server {
        listen       80;
        server_name  "~^(?<username>[^.]{4,})\.(?<type>(vip|maintain))\.abbcc\.net$";

	 location / {
               root	C:/Users/yongjin/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/Abbcc;
         }

	location ~ (\.jsp|^[^.]*|\.action)$
        {
              proxy_pass http://abbcc.com;
	      proxy_set_header X-Real-IP $remote_addr;

        }

	rewrite ^/$ /$type/$username last;
	rewrite ^(/[^/]+)$ /$type/$username$1 last;
	
    }

    server {
	 listen       80;
         server_name  img.jihui88.com;

	 location / {
               root	C:/Abbcc;
         }
    }
 server {
	 listen       80;
         server_name  img.abbcc.net;

	 location / {
               root	C:/Abbcc;
         }
    }
    server {
	 listen       80;
         server_name  img02.jihui88.com;

	 location / {
               root	C:/Abbcc;
         }
    }
 server {
	 listen       80;
         server_name  f.jihui88.com;

	 location / {
               root	C:/Abbcc;
         }
    }