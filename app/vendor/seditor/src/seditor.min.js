var seditorutil={isIE:function(){var e=!1,t=!1,a=!1;return $.browser.msie&&("6.0"==$.browser.version?e=!0:"7.0"==$.browser.version?t=!0:"8.0"==$.browser.version&&(a=!0)),msieLow=e||t||a},addEvent:function(e,t,a){if(e.attachEvent)e.attachEvent(t,a);else if(e.addEventListener){var i=t.toString().replace(/on(.*)/i,"$1");e.addEventListener(i,a,!1)}else e[t]=a},getEvent:function(e){return e||(e=window.event,e.target=e.srcElement,e.layerX=e.offsetX,e.layerY=e.offsetY,e.stopProgressive=function(e){e.cancelBubble=!0},e.buttonValue=function(e){return 1==e.button?0:4==e.button?1:2}),e.pageX=e.pageX||e.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,e.pageY=e.pageY||e.clientY+document.documentElement.scrollTop+document.body.scrollTop,e},keyEvent:function(e,t,a){seditorutil.addEvent(e,t,function(e){a.call(null,seditorutil.getEvent(e).keyCode)})},request:function(e){for(var t=location.href,a=t.substring(t.indexOf("?")+1,t.length).split("&"),i={},s=0,l=a.length;l>s;s++){var n=a[s];i[n.substring(0,n.indexOf("="))]=n.substring(n.indexOf("=")+1,n.length)}var r=i[e];return"undefined"==typeof r?"":r},findClosing:function(e,t,a){var i=e.indexOf(t,a);if(-1==i)throw new Error("Missing closing '"+t+"'");return i},cssRuleList:function(e){return seditorutil.splitCss(e,"{","}")},splitCss:function(e,t,a){for(var i,s=0,l=0,n=[];s<e.length;)if(e.charAt(s)==t){i=e.slice(l,s);var r=seditorutil.findClosing(e,a,s+1);n.push(i.replace(/^[\n\s]*/g,"")+e.slice(s,r+1)),s=l=r+1}else s++;return n},split:function(e,t,a){for(var i=0,s=[],l=e.length;l>i;)if(e.charAt(i)==t){var n=seditorutil.findClosing(e,a,i+1);s.push(e.slice(i+1,n)),i=n+1}else i++;return s},toCssJSON:function(e){var t=[];for(var a in e){var i=[];for(var s in e[a])i.push(s+":"+e[a][s]);t.push(a+"{"+i.join(";")+"}")}return t.join("")},getCssJSON:function(e){var t=[];return seditorutil.forEach(e,function(e){var a=[];for(var i in e.style)a.push(i+":"+e.style[i]);t.push(e.selector+"{"+a.join(";")+"}")}),t.join(" ")},jsonToCSS:function(e){var t={},a=[];return a=e.split(";"),seditorutil.forEach(a,function(e){if(""!=$.trim(e)){for(var a=e.split(":"),i=a[1],s=2,l=a.length;l>s;s++)i+=":"+a[s];t[$.trim(a[0])]=$.trim(i)}}),t},cssToObject:function(e){var t=[];return seditorutil.forEach(e,function(e){var a={},i=seditorutil.split(e,"{","}")[0],s=e.substring(0,e.indexOf("{"));a.selector=$.trim(s),a.style=seditorutil.jsonToCSS(i.replace(/{(.*)}/g,"$1")),t.push(a)}),t},forEach:function(e,t){for(var a=0,i=e.length;i>a;a++)t(e[a])},reduce:function(e,t){seditorutil.forEach(e,function(){t.apply(null,arguments)})},getRuleValue:function(e,t,a){var i="";return seditorutil.forEach(e,function(e){e.selector==a&&(i=e.style[t])}),i},setRuleValue:function(e,t,a,i){var s=!1;seditorutil.reduce(e,function(e){e.selector==t&&(e.style[a]=i,s=!0)}),s||seditorutil.appendRule(e,t,a,i)},appendRule:function(e,t,a,i){var s={};s.selector=t,s.style={},s.style[a]=i,e.push(s)},hasSelect:function(e,t){var a;seditorutil.forEach(e,function(e){return e.selector==t&&(a=e),a})},dialog:function(e,t){art.dialog.open(e,t)},range:function(e,t,a,i,s){var l={maxval:parseInt(a,10),interval:1,defaultValue:parseInt(t,10)};"function"==typeof i&&(l.moveCallback=i),"function"==typeof s&&(l.finishedCallback=s),$(e).slidy(l)},resizeable:function(e){$.each(e,function(){var e,t,a,i;$(this).mousedown(function(s){e=$(this).width(),t=$(this).height(),a=parseInt(s.pageX,10),i=parseInt(s.pageY,10)})})},scale:function(e,t,a,i){e.onmousedown=function(s){var l=document;s||(s=window.event),s.pageX||(s.pageX=s.clientX),s.pageY||(s.pageY=s.clientY);var n=s.pageX,r=s.pageY;e.setCapture?e.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),l.onmousemove=function(e){e||(e=window.event),e.pageX||(e.pageX=e.clientX),e.pageY||(e.pageY=e.clientY);var s=e.pageX-n,l=e.pageY-r;"function"!=typeof i&&(i=!1),i&&i(t+s,a+l)},l.onmouseup=function(){e.releaseCapture?e.releaseCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),l.onmousemove=null,l.onmouseup=null}}},drag:function(e,t){e.onmousedown=function(a){var i=document;a||(a=window.event);var s=a.layerX?a.layerX:a.offsetX,l=a.layerY?a.layerY:a.offsetY;e.setCapture?e.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),i.onmousemove=function(a){a||(a=window.event),a.pageX||(a.pageX=a.clientX),a.pageY||(a.pageY=a.clientY);var i=a.pageX-s,n=a.pageY-l;t?(t.style.left=i+"px",t.style.top=n+"px"):(e.style.left=i+"px",e.style.top=n+"px")},i.onmouseup=function(){e.releaseCapture?e.releaseCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),i.onmousemove=null,i.onmouseup=null}}},scaleable:function(e,t){seditorutil.scale(e,$(e).width(),$(e).height(),t)},getTagName:function(e){return e.tagName.toLowerCase()},clearAllNode:function(e){for(;e.firstChild;){var t=e.removeChild(e.firstChild);t=null}},getElementSize:function(e,t){var a=$(e).css(t);return("auto"==a||"medium"==a||""==a||"normal"==a)&&(a=0),parseInt(a,10)}},seditor={styleContainer:{modify:!1,curModuleId:"",curControl:"",curSelector:"",curPanel:"normal",curDrag:null,curIndex:0,moduleStyle:{},cssRuleList:[],cssObjectList:[],pictures:[],append:"",javascript:"",css:"",moduleContainer:{},defaultStyle:{},styleId:"",containerH:280,rootNavList:[],result:"",treeHover:!1,resizeHandle:[],StyleResFileList:[]},start:function(e,t,a){this.styleContainer.cssStr=a,this.updatePanel(e,t),this.showPanel()},updatePanel:function(e,t){this.removePanel(),this.createPanel(),seditor.styleContainer.curModuleId=e,seditor.styleContainer.curControl=top.$(t),seditor.styleContainer.curSelector=t,e in seditor.styleContainer.moduleContainer||this.initModuleStyle(),this.doModuleStyle(),this.init()},initModuleStyle:function(){seditor.styleContainer.result=this.getResultByModuleId(seditor.styleContainer.curModuleId),seditor.filterResult(seditor.styleContainer.result),seditor.styleContainer.moduleStyle.hasOwnProperty("styleId")?seditor.setModuleStyle():seditor.setDefaultStyle(),seditor.appendToModuleContainer()},getResultByModuleId:function(e){var t;return seditor.styleContainer[e]?t=seditor.styleContainer[e]:(t=jQuery.parseJSON(seditor.styleContainer.cssStr),seditor.styleContainer[e]=t),t},appendToModuleContainer:function(){var e={styleId:seditor.styleContainer.styleId,pictures:seditor.styleContainer.pictures,append:seditor.styleContainer.append,javascript:seditor.styleContainer.javascript,css:seditor.styleContainer.css,modify:!1,cssRuleList:seditor.styleContainer.cssRuleList,cssObjectList:seditor.styleContainer.cssObjectList};seditor.styleContainer.moduleContainer[seditor.styleContainer.curModuleId]=e,seditor.styleContainer.result=""},changePanel:function(e){"undefined"!=typeof e&&(seditor.styleContainer.curPanel=e),seditor.removePanel(),seditor.createPanel(),seditor.doModuleStyle(),seditor.init(),seditor.showPanel()},showPanel:function(){$("#seditor").show(),$("#seditor-canvas").show()},removePanel:function(){$("#seditor").empty(),$(".jPicker").remove()},createPanel:function(){switch(seditor.styleContainer.curPanel){case"normal":seditor.createNormalPanel();break;case"size":seditor.createSizePanel();break;case"background":seditor.createBackgroundPanel();break;case"text":seditor.createTextPanel();break;case"box":seditor.createBoxPanel();break;case"hand":seditor.createHandPanel();break;default:seditor.createSizePanel()}},doModuleStyle:function(){var e=$("#seditor .global-area  .handlestyle");seditor.initModuleCss(e)},init:function(){$.each($("#seditor .style-rating-size"),function(){seditor.setSizeHandle($(this))}),$.each($("#seditor .style-rating-opacity"),function(){seditor.setOpacityHandle($(this))}),$.each($("#seditor .style-range-add"),function(){$(this).click(function(){var e=seditor.getHandleStyle($(this)),t=parseInt(e.val(),10);e.val(++t),e.change()})}),$.each($("#seditor .style-range-dec"),function(){$(this).click(function(){var e=seditor.getHandleStyle($(this)),t=parseInt(e.val());e.val(0==t?t:--t),e.change()})}),$.each($(".sample-input"),function(){$(this).change(function(){"z-index"==$(this).attr("name")?seditor.setIndexHandle($(this)):seditor.setInputHandle($(this))})}),$.each($("#seditor .style-bg-color-span,#seditor .style-border-color,#seditor .color"),function(){var e="transparent",t=seditor.getHandleStyle($(this)),a=seditorutil.getRuleValue(seditor.styleContainer.cssObjectList,$(this).attr("name"),seditor.styleContainer.curSelector)||"transparent",i={alphaSupport:!0};if("transparent"==a)var i={alphaSupport:!0,active:new $.jPicker.Color({hex:null,a:0})};else var i={alphaSupport:!0,active:new $.jPicker.Color({hex:a})};$(this).jPicker({window:{expandable:!0},color:i},function(a){e=null==a.val("all")?"transparent":"#"+a.val("all").hex,seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),e),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e)},function(a){defaultvalue="transparent",e=null==a.val("all")?"transparent":"#"+a.val("all").hex,seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e)})}),$.each($("#seditor .select"),function(){var e=$(this);e.change(function(){seditor.setSelectHandle(e)})}),$.each($("#seditor .checkbox"),function(){var e=$(this);e.click(function(){seditor.setCheckboxHandle(e)})}),$.each($("#seditor .bg-img-btn"),function(){var e=$(this);e.click(function(){var e=$(this),t=function(t){seditor.setBackgroundHandle(e,"url("+t+")"),e.parents(".handleitem:first").find(".background-image-sample").css("background-image","url("+t+")")};art.dialog.open("/common/upload/fiy_upload.html?pageType=seditor&pic_num=1",{id:"updateStyleCss",title:"选择图片",init:function(){var e=this.iframe.contentWindow;e.updateStyleCss=t}})})}),$.each($("#seditor .bg-image-remove-btn"),function(){var e=$(this);e.click(function(){seditor.setBackgroundHandle($(this),"none"),$(this).parents(".handleitem:first").find(".background-image-sample").css("background-image","url(themes/default/img/style-bg-image.gif)")})}),$.each($("#seditor .style-bg-pos"),function(){$("span",$(this)).bind("click",function(){var e=$(this).attr("class");$.each($(this).siblings(),function(){var e=$(this).attr("class");$(this).attr("class",e.replace(/\s+[\w|-]*/g,""))}),$(this).addClass(e+"-selected"),seditor.updateCssObjectList(seditor.styleContainer.curSelector,"background-position",$(this).attr("value")),seditor.setSiteCss(seditor.styleContainer.curControl,"background-position",$(this).attr("value"))})})},changeModule:function(e){var t=$(e).parents(".moveChild:first").attr("data-piece"),a=seditor.getHandleSelector(t,$(e));return"undefined"==typeof t&&(t=$(e).attr("data-piece")),seditor.styleContainer.curModuleId=t,seditor.styleContainer.curSelector=a,{moduleId:t,selector:a}},getHandleSelector:function(e,t){var a="";return"undefined"==typeof e||""==e?(e=$(t).attr("data-piece"),a="#"+e):a="#"+e+" "+seditor.getSelector($(t)),a},closeCanvas:function(){$("#seditor-canvas").hide()},filterResult:function(e){seditor.styleContainer.StyleResFileList=e,seditorutil.forEach(seditor.styleContainer.StyleResFileList,function(e){"02"==e.type?seditor.styleContainer.defaultStyle=e:seditor.styleContainer.moduleStyle=e})},setDefaultStyle:function(){seditor.filterCss(seditor.styleContainer.defaultStyle),seditor.styleContainer.styleId=""},splitStyle:function(e){seditor.styleContainer.pictures=$.parseJSON(e.pictures)||[],seditor.styleContainer.css=e.css,seditor.styleContainer.js=e.js,seditor.styleContainer.append=e.append,seditor.styleContainer.styleId=e.styleId},filterCss:function(e){seditor.splitStyle(e),seditor.styleContainer.cssRuleList=seditorutil.cssRuleList(seditor.styleContainer.css),seditor.styleContainer.cssObjectList=seditorutil.cssToObject(seditor.styleContainer.cssRuleList)},setModuleStyle:function(){seditor.filterCss(seditor.styleContainer.moduleStyle)},initModuleCss:function(e){var t=["text","textarea","select","checkbox","background-image","background-repeat","background-color","background-position","border-top","border-left","border-right","border-bottom"];$.each(e,function(){for(var e="text",a=$(this).attr("name"),i=seditorutil.getRuleValue(seditor.styleContainer.cssObjectList,a,seditor.styleContainer.curSelector),s=0,l=t.length;l>s;s++)if(-1!=$(this).attr("class").indexOf(t[s])){e=t[s];break}switch(e){case"text":$(this).val("opacity"==a?i||100*parseFloat(top.$(seditor.styleContainer.curSelector).css(a)):"border-radius"==a?i||parseInt(top.$(seditor.styleContainer.curSelector).css(a))||0:parseInt(i,10)||seditorutil.getElementSize(seditor.styleContainer.curControl,a));break;case"textarea":break;case"select":("undefined"==typeof i||""==i)&&(i=top.$(seditor.styleContainer.curSelector).css(a)),"undefined"!=typeof i&&$("[value="+i+"]",$(this)).attr("selected","selected");break;case"checkbox":i==$(this).val()&&$(this).attr("checked","checked");break;case"background-color":break;case"background-image":var n=seditorutil.getRuleValue(seditor.styleContainer.cssObjectList,$(this).attr("name"),seditor.styleContainer.curSelector)||"url(themes/default/img/style-bg-image.gif)";$(this).parents(".global-bg-upload:first").find(".background-image-sample").css("background-image",n);break;case"background-repeat":break;case"background-position":"undefined"!=typeof i&&$("span",$(this)).filter(function(){return $(this).attr("value")==i}).addClass(i.replace(" ","-")+"-selected");break;default:$(this).val(parseInt(seditorutil.getRuleValue(seditor.styleContainer.cssObjectList,$(this).attr("name"),seditor.styleContainer.curSelector),10))}})},createNormalPanel:function(){var e='<div id="global-bg-conf" class="global-area clearfix"><div class="global-bg-upload relative clearfix"><div class="handleitem clearfix left"><div id="global-bg-image" class="background-image-sample left" ></div><div class="left"><p id="global-bg-image-btn" class=""><a class="bg-img-btn handlestyle background-image"  name="background-image" href="javascript:void(0);">更改背景</a></p><p style="padding-left: 76px; padding-top: 11px;"><span class=""><a href="javascript:void(0);"  id="global-bg-remove" class="bg-image-remove-btn"><img width="14" height="14" align="absmiddle" src="themes/default/img/style-bg-remove.gif">移除背景</a></span></p></div></div><p class="global-bg-p left"><span class="handleitem"> <span>背景色</span> <span class="style-bg-color-span handlestyle background-color"  name="background-color"></span> </span></p></div><div id="global-bg-pos-area" class="global-bg-pos-area"><div id="global-bg-pos" class="style-bg-pos clearfix"><div class="handleitem handlestyle background-position" name="background-position"><span class="top-left" value="top left">&nbsp;</span> <span class="top-center" value="top center">&nbsp;</span> <span class="top-right" value="top right">&nbsp;</span> <span class="center-left" value="center left">&nbsp;</span> <span class="center-center" value="center center">&nbsp;</span> <span class="center-right" value="center right">&nbsp;</span> <span class="bottom-left" value="bottom left">&nbsp;</span> <span class="bottom-center" value="bottom center">&nbsp;</span> <span class="bottom-right" value="bottom right">&nbsp;</span></div></div></div><div id="global-bg-repeat-area" class="global-bg-repeat-area left"><div id="global-bg-repeat" class="style-bg-repeat clearfix"><p class="handleitem"><input name="background-attachment" type="checkbox"  class="handlestyle checkbox" default="scroll" value="fixed" id="background-attachment"><label  for="background-attachment">背景固定</label></p><p>背景重复</p><div class="handleitem"><select name="background-repeat"  class="handlestyle style-background-repeat select"><option value="repeat">平铺</option><option value="repeat-x">横向平铺</option><option value="repeat-y">纵向平铺</option><option value="no-repeat">不平铺</option></select></div></div></div>NaN';$("#seditor").append($(e));var t='<div id="global-size-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">宽度</div><div class="global-c style-range left"><div id="width" class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="1280" type="text" value="0" id="global-range-input-width" name="width"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div><div class="handleitem"><div class="style-label left">高度</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="500" type="text"  value="0" id="global-range-input-height" name="height"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>';$("#seditor").append($(t));var e='<div id="global-text-conf" class="global-area clearfix"><div class="handleitem left"><div class="style-label left">文字</div><div class="global-c style-range left"><div id="font-size" class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text" value="0"  name="font-size"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div><div class="handleitem left"><div class="style-label left">行高</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text" value="0"  name="line-height"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div><div id="global-talign-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">文字对齐</div><div class="left clearfix"><select name="text-align" class="handlestyle select text-align"><option value="left">左对齐</option><option value="center">居中对齐</option><option value="right">右对齐</option></select></div></div><div class="style-label left">文字颜色</div><div class="handleitem left space"><div name="color" class="font-color handlestyle color"></div></div><div class="handleitem left"><input name="font-weight" type="checkbox"  class="handlestyle checkbox" default="normal" value="bold" id="font-weight"><label  for="font-weight">粗体</label></div><div class="handleitem left"><input name="font-style" type="checkbox"  class="handlestyle checkbox" default="normal" value="italic" id="font-style"><label  for="font-style">斜体</label></div></div>';$("#seditor").append($(e))},createSizePanel:function(){var e='<div id="global-size-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">宽度</div><div class="global-c style-range left"><div id="width" class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="1280" type="text" value="0" id="global-range-input-width" name="width"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div><div class="handleitem"><div class="style-label left">高度</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="500" type="text"  value="0" id="global-range-input-height" name="height"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>';$("#seditor").append($(e));var t='<div id="global-pos-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">定位模式</div><div class="left clearfix"><select name="position" class="handlestyle select position"><option value="static">静态</option><option value="relative">相对定位</option><option value="absolute">绝对定位</option></select></div></div><div class="handleitem"><div class="style-label left">X轴</div><div class="style-range-area left clearfix"><input class="left handlestyle sample-input text"  type="text"  value="0"  name="left"><div class="style-range-handle right"><p><img width="15" height="8" src="vendor/range/themes/range-up.gif" class="style-range-add"></p><p><img width="15" height="8" src="vendor/range/themes/range-down.gif" class="style-range-dec"></p></div></div></div><div class="handleitem"><div class="style-label left">Y轴</div><div class="style-range-area left clearfix"><input class="left handlestyle sample-input text"  type="text"  value="0"  name="top"><div class="style-range-handle right"><p><img width="15" height="8" src="vendor/range/themes/range-up.gif" class="style-range-add"></p><p><img width="15" height="8" src="vendor/range/themes/range-down.gif" class="style-range-dec"></p></div></div></div></div><div id="global-float-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">浮动模式</div><div class="left clearfix"><select name="float" class="handlestyle select float"><option value="none">无</option><option value="left">左浮动</option><option value="right">右浮动</option></select></div></div></div><div id="global-overflow-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">内容溢出</div><div class="left clearfix"><select name="overflow" class="handlestyle select overflow"><option value="hidden">溢出隐藏</option><option value="visible">溢出显示</option><option value="scroll">滚动条</option></select></div></div></div><div id="global-index-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">层叠顺序</div><div class="style-range-area left clearfix"><input class="left handlestyle sample-input text"  type="text"  value="0"  name="z-index"><div class="style-range-handle right"><p><img width="15" height="8" src="vendor/range/themes/range-up.gif" class="style-range-add"></p><p><img width="15" height="8" src="vendor/range/themes/range-down.gif" class="style-range-dec"></p></div></div></div></div><div id="global-valign-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">垂直对齐方式</div><div class="left clearfix"><select name="vertical-align" class="handlestyle select vertical-align"><option value="baseline">默认</option><option value="top">顶端对齐</option><option value="text-top">文字顶端对齐</option><option value="middle">居中对齐</option><option value="text-bottom">文字底部对齐</option><option value="bottom">底部对齐</option><option value="sub">文本下标对齐</option><option value="super">文本上标对齐</option></select></div></div></div>';$("#seditor").append($(t))},createBackgroundPanel:function(){var e='<div id="global-size-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">透明</div><div class="global-c style-range left"><div class="style-rating-opacity"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" type="text" maxval="100" value="100" id="global-range-input-height" name="opacity"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div><div class="handleitem"><div class="style-label left">圆角</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" type="text" maxval="50" value="0" id="global-range-input-height" name="border-radius"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>';$("#seditor").append($(e));var t='<div id="global-bg-conf" class="global-area clearfix"><div class="global-bg-upload relative clearfix"><div class="handleitem clearfix left"><div id="global-bg-image" class="background-image-sample left" ></div><div class="left"><p id="global-bg-image-btn" class=""><a class="bg-img-btn handlestyle background-image"  name="background-image" href="javascript:void(0);">更改背景</a></p><p style="padding-left: 76px; padding-top: 11px;"><span class=""><a href="javascript:void(0);"  id="global-bg-remove" class="bg-image-remove-btn"><img width="14" height="14" align="absmiddle" src="themes/default/img/style-bg-remove.gif">移除背景</a></span></p></div></div><p class="global-bg-p left"><span class="handleitem"> <span>背景色</span> <span class="style-bg-color-span handlestyle background-color"  name="background-color"></span> </span></p></div><div id="global-bg-pos-area" class="global-bg-pos-area"><div id="global-bg-pos" class="style-bg-pos clearfix"><div class="handleitem handlestyle background-position" name="background-position"><span class="top-left" value="top left">&nbsp;</span> <span class="top-center" value="top center">&nbsp;</span> <span class="top-right" value="top right">&nbsp;</span> <span class="center-left" value="center left">&nbsp;</span> <span class="center-center" value="center center">&nbsp;</span> <span class="center-right" value="center right">&nbsp;</span> <span class="bottom-left" value="bottom left">&nbsp;</span> <span class="bottom-center" value="bottom center">&nbsp;</span> <span class="bottom-right" value="bottom right">&nbsp;</span></div></div></div><div id="global-bg-repeat-area" class="global-bg-repeat-area left"><div id="global-bg-repeat" class="style-bg-repeat clearfix"><p class="handleitem"><input name="background-attachment" type="checkbox"  class="handlestyle checkbox" default="scroll" value="fixed" id="background-attachment"><label  for="background-attachment">背景固定</label></p><p>背景重复</p><div class="handleitem"><select name="background-repeat"  class="handlestyle style-background-repeat select"><option value="repeat">平铺</option><option value="repeat-x">横向平铺</option><option value="repeat-y">纵向平铺</option><option value="no-repeat">不平铺</option></select></div></div></div>NaN';$("#seditor").append($(t))},createTextPanel:function(){var e='<div id="global-text-conf" class="global-area clearfix"><div class="handleitem left"><div class="style-label left">文字</div><div class="global-c style-range left"><div id="font-size" class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text" value="0"  name="font-size"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div><div class="handleitem left"><div class="style-label left">行高</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text" value="0"  name="line-height"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div><div id="global-talign-conf" class="global-area clearfix"><div class="handleitem"><div class="style-label left">文字对齐</div><div class="left clearfix"><select name="text-align" class="handlestyle select text-align"><option value="left">左对齐</option><option value="center">居中对齐</option><option value="right">右对齐</option></select></div></div><div class="style-label left">文字颜色</div><div class="handleitem left space"><div name="color" class="font-color handlestyle color"></div></div><div class="handleitem left"><input name="font-weight" type="checkbox"  class="handlestyle checkbox" default="normal" value="bold" id="font-weight"><label  for="font-weight">粗体</label></div><div class="handleitem left"><input name="font-style" type="checkbox"  class="handlestyle checkbox" default="normal" value="italic" id="font-style"><label  for="font-style">斜体</label></div></div><div id="global-space-conf" class="global-area clearfix"><div class="handleitem left"><div class="style-label left">文字间距</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="10" type="text" value="0"  name="letter-spacing"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div><div id="global-indent-conf" class="global-area clearfix"><div class="handleitem left"><div class="style-label left">首行缩进</div><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="20" type="text" value="0"  name="text-indent"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>';$("#seditor").append($(e))},createBoxPanel:function(){var e='<div id="global-border-conf" class="global-area clearfix"><div class="style-border clearfix">'+seditor.createBorderHtml("border-top")+seditor.createBorderHtml("border-right")+seditor.createBorderHtml("border-bottom")+seditor.createBorderHtml("border-left")+"</div></div>";e+='<div id="global-padding-conf" class="global-area clearfix"><div class="style-padding clearfix">'+seditor.createPaddingHtml("padding-top","上")+seditor.createPaddingHtml("padding-right","右")+seditor.createPaddingHtml("padding-bottom","下")+seditor.createPaddingHtml("padding-left","左")+"</div></div>",e+='<div id="global-margin-conf" class="global-area clearfix"><div class="style-padding clearfix">'+seditor.createMarginHtml("margin-top","上")+seditor.createMarginHtml("margin-right","右")+seditor.createMarginHtml("margin-bottom","下")+seditor.createMarginHtml("margin-left","左")+"</div></div>",$("#seditor").append($(e))},createMarginHtml:function(e,t){return'<div class="style-margin-item left"><div class="style-border-sample space left"><img width="23" height="23" src="themes/default/img/style-'+e+'.gif"></div><div class="left" style="padding-left:20px;">边距'+t+'</div><div class="handleitem space left" style="padding-left: 45px;"><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text"  value="0" name="'+e+'"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>'},createPaddingHtml:function(e,t){return'<div class="style-padding-item left"><div class="style-border-sample space left"><img width="23" height="23" src="themes/default/img/style-'+e+'.gif"></div><div class="left" style="padding-left:20px;">填充'+t+'</div><div class="handleitem space left" style="padding-left: 45px;"><div class="global-c style-range left"><div class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" type="text"  value="0" name="'+e+'"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>'
},createBorderHtml:function(e){return'<div class="style-border-item clearfix"><div class="style-border-sample space left"><img width="23" height="23" src="themes/default/img/style-'+e+'.gif"></div><div class="handleitem space style-border-select left"><select name="'+e+'-style" class="handlestyle select style-border-style"><option value="none">无</option><option value="solid">实线</option><option value="dashed">点</option><option value="dotted">虚线</option><option value="double">双倍</option><option value="groove">凹线</option><option value="ridge">边线</option></select></div><div class="handleitem space-m relative left"><div name="'+e+'-color" class="style-border-color handlestyle"></div></div><div class="handleitem space"><div class="global-c style-range left"><div id="width" class="style-rating-size"></div></div><div class="style-range-area left clearfix"><input class="left handlestyle text" maxval="50" width="100" type="text" value="0" name="'+e+'-width"><div class="style-range-handle right"><p><img width="15" height="8" class="style-range-add" src="vendor/range/themes/range-up.gif"></p><p><img width="15" height="8" class="style-range-dec" src="vendor/range/themes/range-down.gif"></p></div></div></div></div>'},createHandPanel:function(){},getRule:function(){var e=0,t=seditor.styleContainer.cssRuleList.length;for(e;t>e;e++);},updateCss:function(e,t){$(e).css(t);for(var a in t)seditor.updateCssObjectList(seditor.getHandleSelector(seditor.styleContainer.curModuleId,e),a,t[a])},setSiteCss:function(e,t,a){$(e).css(t,a),top.WebUtils&&"function"==typeof top.WebUtils.dashedFrame&&top.WebUtils.dashedFrame(e)},updateCssObjectList:function(e,t,a){"undefined"==typeof seditor.styleContainer.moduleContainer[seditor.styleContainer.curModuleId]&&seditor.initModuleStyle(seditor.styleContainer.curModuleId),seditorutil.setRuleValue(seditor.styleContainer.moduleContainer[seditor.styleContainer.curModuleId].cssObjectList,e,t,a)},getHandleStyle:function(e){return $(e).parents(".handleitem:first").find(".handlestyle")},initHandlestyle:function(e,t,a){var i=seditor.getHandleStyle(e);seditorutil.range(e,i.val(),i.attr("maxval"),t,a)},bindTextEvent:function(e,t,a,i,s){$.each(e,function(){var e=$(this);e.change(function(){seditor.initHandlestyle(t,a,i),"function"==typeof s&&s()}),seditorutil.keyEvent(e.get(0),"onkeydown",function(t){38==t?(e.val(parseInt(e.val())+1),e.change()):40==t&&(e.val(parseInt(e.val())-1),e.change())})})},setSizeHandle:function(e){var t=seditor.getHandleStyle(e);seditor.initHandlestyle(e,function(e){t.val(e),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e+"px")},function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),e+"px"),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e+"px")}),seditor.bindTextEvent(t,e,function(e){t.val(e),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e+"px")},function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),e+"px"),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e+"px")},function(){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),t.val()+"px"),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),t.val()+"px")})},setInputHandle:function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,e.attr("name"),parseInt(e.val(),10)+"px"),seditor.setSiteCss(seditor.styleContainer.curControl,e.attr("name"),parseInt(e.val(),10)+"px")},setIndexHandle:function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,e.attr("name"),parseInt(e.val(),10)),seditor.setSiteCss(seditor.styleContainer.curControl,e.attr("name"),parseInt(e.val(),10))},setOpacityHandle:function(e){var t=seditor.getHandleStyle(e);seditor.initHandlestyle(e,function(e){t.val(e),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e/100)},function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),e/100),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e/100)}),seditor.bindTextEvent(t,e,function(e){t.val(e),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e/100)},function(e){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),e/100),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),e/100)},function(){seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),parseInt(t.val(),10)/100),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),parseInt(t.val(),10)/100)})},setSelectHandle:function(e){var t=seditor.getHandleStyle(e);seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),$("option:selected",t).val()),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),$("option:selected",t).val())},setCheckboxHandle:function(e){var t=seditor.getHandleStyle(e),a=$(t).attr("checked");seditor.updateCssObjectList(seditor.styleContainer.curSelector,t.attr("name"),a?t.val():t.attr("default")),seditor.setSiteCss(seditor.styleContainer.curControl,t.attr("name"),a?t.val():t.attr("default"))},setBackgroundHandle:function(e,t){var a=seditor.getHandleStyle(e);seditor.updateCssObjectList(seditor.styleContainer.curSelector,a.attr("name"),t),seditor.setSiteCss(seditor.styleContainer.curControl,a.attr("name"),t)},getStyle:function(){var e=seditor.styleContainer.moduleContainer[seditor.styleContainer.curModuleId];return e.css=seditorutil.getCssJSON(e.cssObjectList),{id:e.styleId,moduleId:e.curModuleId,css:e.css,append:e.append,javascript:e.javascript,pictures:e.pictures.join("")}},saveStyle:function(){var e=seditor.styleContainer.moduleContainer[seditor.styleContainer.curModuleId];e.css=seditorutil.getCssJSON(e.cssObjectList),alert(e.css),$.ajax({type:"post",url:"/rest/modulestyle/save",data:{id:e.styleId,moduleId:e.curModuleId,css:e.css,append:e.append,javascript:e.javascript,pictures:e.pictures.join("")},success:function(){art.dialog.tips("保存成功",1)}})},highlight:function(e,t){var a="block";"undefined"!=typeof t&&"show"==t?(seditor.styleContainer.treeHover=!0,a="block"):seditor.styleContainer.treeHover?dislay="block":a="none";var i=$(e),s=i.width(),l=i.height(),n=parseInt(i.offset().left,10),r=parseInt(i.offset().top,10),d=seditorutil.getElementSize(i,"margin-left"),o=seditorutil.getElementSize(i,"margin-top"),c=seditorutil.getElementSize(i,"margin-right"),g=seditorutil.getElementSize(i,"margin-bottom"),p=seditorutil.getElementSize(i,"padding-top"),u=seditorutil.getElementSize(i,"padding-right"),v=seditorutil.getElementSize(i,"padding-bottom"),h=seditorutil.getElementSize(i,"padding-left"),f=seditorutil.getElementSize(i,"border-top-width"),y=seditorutil.getElementSize(i,"border-right-width"),m=seditorutil.getElementSize(i,"border-bottom-width"),b=seditorutil.getElementSize(i,"border-left-width"),n=n-b-d,r=r-f-o,x=seditorutil.getElementSize(i,"z-index");seditor.styleContainer.highlight=$("#style-outer"),seditor.styleContainer.highlight.size()>0||(seditor.styleContainer.highlight=$("<div id='style-outer'><div id='style-highlight' style='z-index:9001;border-style:solid;background:#214FA3;position:absolute;'><div class='style-inner' style='background:#2288cc;width:100%;height:100%;font-size:10px;'>z-index: "+x+"&nbsp;</div></div></div>"),$("body").append(seditor.styleContainer.highlight)),seditor.styleContainer.highlight.find("#style-highlight").css({width:s+"px",height:l+"px","margin-top":o+"px","margin-right":c+"px","margin-bottom":g+"px","margin-left":d+"px","padding-top":p+"px","padding-right":u+"px","padding-bottom":v+"px","padding-left":h+"px","border-top-width":f+"px","border-right-width":y+"px","border-bottom-width":m+"px","border-left-width":b+"px"}),$(seditor.styleContainer.highlight).css({opacity:.4,position:"absolute","z-index":9e3,"background-color":"yellow",top:r+"px",left:n+"px",display:a,width:s+d+b+h+u+y+c+"px",height:l+o+f+p+v+m+g+"px"})},hidelight:function(e){"undefined"!=typeof e&&"tree"==e&&(seditor.styleContainer.treeHover=!1),$(seditor.styleContainer.highlight).hide()},drowDomTree:function(){var e=$("#"+seditor.styleContainer.curModuleId);$("#dom-tree").empty().append(seditor.createDomTree(e))},createDomTree:function(e){for(var t=$('<ul class="ul-navList"></ul>'),a=1,i=seditor.createElement(seditor.bulidItem(e,seditorutil.getTagName(e[0]),a)),s=$('<ul class="grade'+ ++a+'-ul" style=""></ul>'),l=e.children(),n=0,r=l.size();r>n;n++){var d=l.get(n);$(s).append(seditor.bulidSub(d,seditor.createElement(seditor.bulidItem(d,seditorutil.getTagName(e[0]),a)),a))}return $(i).append(s),$(t).append(i),t},bulidSub:function(e,t,a){$(e);if(a=++a,$(e).children().size()>0){a>5&&(a=5);for(var i=$('<ul class="grade'+a+'-ul" style=""></ul>'),s=0,l=$(e).children().size();l>s;s++){var n=$(e).children().get(s),r=seditor.bulidItem(n,seditorutil.getTagName(n),a);$(i).append($(n).children().size()>0?seditor.bulidSub(n,seditor.createElement(r),a+1):seditor.createElement(r))}$(t).append(i)}return t},hasChildNode:function(e){return $(e).children().size()>0?!0:!1},createElement:function(e){var t="button blue"+e.grade,a="";a=e.hasChild?'<span class="open" onclick="seditor.extendTree(this)">&nbsp;</span>':'<span class="open" onclick="seditor.extendTree(this)">&nbsp;</span>';var i='<li class="grade'+e.grade+'"><div class="item-li">'+a+"<a onmouseover=\"seditor.highlight('"+e.selector+"','show')\" onmouseout=\"seditor.hidelight('tree')\" onclick=\"seditor.treeClick(this,'"+e.curModuleId+"','"+e.selector+'\')" href="javascript:;" class="a-btn-static '+t+'">&lt;'+e.name+' id="'+e.id+'"  class="'+e.className+'"&gt;'+e.title.substring(0,10)+"</a></div></li>";return $(i)},treeClick:function(e,t,a){$("#dom-tree").find(".select").removeClass("select"),$(e).addClass("select"),seditor.start(t,a)},extendTree:function(e){var t=$(e).hasClass("open");t?($(e).removeClass("open"),$(e).addClass("close"),$(e).parent().siblings("ul").hide()):($(e).removeClass("close"),$(e).addClass("open"),$(e).parent().siblings("ul").show())},bulidItem:function(e,t,a){var i={},s=$(e),l=s.attr("title");return i.hasChild=seditor.hasChildNode(e),i.curModuleId=seditor.styleContainer.curModuleId,i.selector="#"+seditor.styleContainer.curModuleId==seditor.getSelector(e)?"#"+seditor.styleContainer.curModuleId:"#"+seditor.styleContainer.curModuleId+" "+seditor.getSelector(e),i.name=t,i.grade=a,""!=$.trim(l)&&(l="【"+l+"】"),i.title=l||"",i.className=s.attr("class"),i.id=s.attr("id"),i},getSelector:function(e){var t="",a=$(e).attr("id"),i=$(e).attr("class");return""!=a&&"undefined"!=typeof a?t="#"+a:""!=i&&"undefined"!=typeof i?t="."+i.split(" ")[0]:(t=seditorutil.getTagName(e),t=arguments.callee(e.parentNode)+" "+t),t},appendResizableHandle:function(e){$(seditor.styleContainer.resizeHandle).remove();var t='<div class="style-resizable-handle style-resizable-n"><p class="handle N"></p></div><div class="style-resizable-handle style-resizable-s"><p class="handle S" ></p></div><div class="style-resizable-handle style-resizable-e"><p class="handle E"></p></div><div class="style-resizable-handle style-resizable-w"><p class="handle W"></p></div><div class="style-resizable-handle style-resizable-se"><p class="handle SE"></p></div><div class="style-resizable-handle style-resizable-sw"><p class="handle SW" ></p></div><div class="style-resizable-handle style-resizable-nw"><p class="handle NW" ></p></div><div class="style-resizable-handle style-resizable-ne"><p class="handle NE" ></p></div>';seditor.styleContainer.resizeHandle=$(t),seditorutil.resizeable(seditor.styleContainer.resizeHandle),$(e).append(seditor.styleContainer.resizeHandle)},bindEditable:function(e){$(e).bind("click",function(){return seditor.editable($(this)),!1}),$(e).bind("dblclick",function(){var e=seditor.changeModule($(this));return seditor.start(e.moduleId,e.selector),!1})},editable:function(e){var t=$(e);seditor.styleContainer.curDrag=null,seditor.styleContainer.curIndex=seditorutil.getElementSize(t,"z-index");var a=seditor.changeModule(t).selector;seditor.updatePanel(seditor.styleContainer.curModuleId,seditor.styleContainer.curSelector),seditor.appendResizableHandle(t);var i=t.css("position");return seditor.styleContainer.curDrag="relative"==i?t.drag("start",function(e,a){a.attr=$(e.target).prop("className"),a.width=t.width(),a.height=t.height(),a.left=t.offset().left,a.top=t.offset().top}).drag("end",function(e,t){return seditor.updateCssObjectList(a,"width",t.width+t.deltaX+"px"),seditor.updateCssObjectList(a,"height",t.height+t.deltaY+"px"),!1}).drag(function(e,a){var i={};a.attr.indexOf("SE")>-1?(i.height=Math.max(32,a.height+a.deltaY),i.width=Math.max(32,a.width+a.deltaX)):a.attr.indexOf("E")>-1?i.width=Math.max(32,a.width+a.deltaX):a.attr.indexOf("S")>-1?i.height=Math.max(32,a.height+a.deltaY):a.attr.indexOf("W")>-1?(i.width=Math.max(32,a.width-a.deltaX),i.left=a.originalX+a.width-i.width):a.attr.indexOf("N")>-1&&(i.height=Math.max(32,a.height-a.deltaY),i.top=a.originalY+a.height-i.height),t.css(i)},{handle:".handle"}):t.drag("start",function(e,a){a.attr=$(e.target).prop("className"),a.className="editable",a.width=t.width(),a.height=t.height(),a.left=t.offset().left,a.top=t.offset().top}).drag("end",function(e,i){return seditor.updateCssObjectList(a,"width",i.width+i.deltaX+"px"),seditor.updateCssObjectList(a,"height",i.height+i.deltaY+"px"),seditor.updateCssObjectList(a,"left",t.offset().left+"px"),seditor.updateCssObjectList(a,"top",t.offset().top+"px"),!1}).drag(function(e,a){var i={};a.attr.indexOf("SE")>-1?(i.height=Math.max(32,a.height+a.deltaY),i.width=Math.max(32,a.width+a.deltaX)):a.attr.indexOf("NW")>-1?(i.height=a.height-a.deltaY,i.width=a.width-a.deltaX,i.left=a.left+a.deltaX,i.top=a.top+a.deltaY):a.attr.indexOf("SW")>-1?(i.height=a.height+a.deltaY,i.width=a.width-a.deltaX,i.left=a.left+a.deltaX):a.attr.indexOf("NE")>-1?(i.height=a.height-a.deltaY,i.width=a.width+a.deltaX,i.top=a.top+a.deltaY):a.attr.indexOf("E")>-1?i.width=Math.max(32,a.width+a.deltaX):a.attr.indexOf("S")>-1?i.height=Math.max(32,a.height+a.deltaY):a.attr.indexOf("W")>-1?(i.width=Math.max(32,a.width-a.deltaX),i.left=a.originalX+a.width-i.width):a.attr.indexOf("N")>-1?(i.height=Math.max(32,a.height-a.deltaY),i.top=a.originalY+a.height-i.height):a.className.indexOf("editable")>-1&&(i.top=a.offsetY,i.left=a.offsetX),t.css(i)}),!1}};