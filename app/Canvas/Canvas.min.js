(function(){"use strict";function t(t,e){this._chain=!!e,this._wrapped=t}function e(t,e){var a=document.createElement(t);for(var i in e)a.setAttribute(i,e[i]);return a}function a(t,e,a,i,s){var n=t.getContext("2d");return n.clearRect(e,a,i,s),n}function i(t){if(!t.canvas)throw"A canvas is required";if(!t.image)throw"Image is required";var e=t.canvas,a=t.canvas.getContext("2d"),i=t.image,s=t.srcx||0,n=t.srcy||0,r=t.srcw||i.naturalWidth,o=t.srch||i.naturalHeight,c=t.desx||s,l=t.desy||n,h=t.desw||r,f=t.desh||o,d=t.auto,u=t.opacity||1,p=window.devicePixelRatio||1,v=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1,g=p/v;if("undefined"==typeof d&&(d=!0),d&&p!==v){var x=e.width,w=e.height;e.width=x*g,e.height=w*g,e.style.width=x+"px",e.style.height=w+"px",a.scale(g,g)}a.globalAlpha=u,a.drawImage(t.image,s,n,r,o,c,l,h,f)}function s(t,e,a){if(this.canvas=t||document.getElementById("canvas"),Est.isEmpty(this.canvas))throw new Error("canvas is required");this.opts={fillStyle:"#000",fontSize:"12",fontWeight:"Bold",textAlign:"center",before:function(){},after:function(){}},Est.extend(this.opts,a);var i=this.canvas.getContext("2d");return this.opts.before.call(i),i.save(),i.fillStyle=this.opts.fillStyle,i.fillRect(i.left,i.top,this.canvas.width,this.canvas.height),i.restore(),i.save(),i.font=this.opts.fontWeight+" "+this.opts.fontSize+"px Arial",i.textAlign=this.opts.textAlign,i.fillText(e,this.canvas.width/2,this.canvas.height/2+this.opts.fontSize/2),i.restore(),this.opts.after.call(null,i),i}function n(t,e,a,i,s,n,r){if(this.canvas=t||document.getElementById("canvas"),Est.isEmpty(this.canvas))throw new Error("canvas is required");this.opts={before:function(){},after:function(){}},Est.extend(this.opts,r),"function"===Est.typeOf(this.opts.before)&&this.opts.before.call(null,c);var o=Math.PI/180;s*=o,n*=o;var c=this.canvas.getContext("2d");return c.save(),c.translate(e,a),c.beginPath(),c.arc(0,0,i,s,n),c.save(),c.rotate(n),c.moveTo(i,0),c.lineTo(0,0),c.restore(),c.rotate(s),c.lineTo(i,0),c.closePath(),c.restore(),"function"===Est.typeOf(this.opts.after)&&this.opts.after.call(null,c),c}function r(t,e,a){var i=t.getContext("2d");i.save(),i.translate(t.width/2,t.height/2),i.rotate(e*Math.PI/180),"undefined"!=typeof a&&a.call(i),i.restore()}function o(t,e,a){if(t>90&&180>t)t=180-a*e;else if(t>180&&270>t)t=-e*a-180;else if(t>270&&360>t)t=180-e*a;else if(t>360&&450>t){t=90-t}else t>450&&640>t&&(t=90+e/2);switch(t){case 0:t=-90;break;case 90:t=-90;break;case 180:t=90;break;case 270:t=0;break;case 360:t=-90;break;case 450:t=-360}return t}function c(t,e,a,i){var s,n;switch(i){case 180:s=t-a,n=e;break;case 0:s=t+a,n=e;break;case 90:s=t,n=e+a;break;case 270:s=t,n=e-a;break;default:i=Math.PI/180*i,s=t+a*Math.cos(i),n=e+a*Math.sin(i)}return{x:s,y:n}}var l=this,h=function(e){return e&&"object"==typeof e&&"array"!==Est.typeOf(e)&&Object.prototype.hasOwnProperty.call(e,"_wrapped")?e:new t(e)};h.version="1.1.0","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.Canvas=h):l.Canvas=h,h.createElement=e,h.clearRect=a,h.drawImage=i,h.drawText=s,h.drawSector=n,h.drawRotated=r,h.getDegreeByCircle=o,h.getCircleLocation=c,Est.mixin(h,!1),"function"==typeof define&&define.amd&&define("Canvas",[],function(){return h})}).call(this);