!function(t,e){function n(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function o(){return S++}function a(t){return t.match(T)[0]}function r(t){for(t=t.replace(_,"/"),t=t.replace(C,"$1/");t.match(z);)t=t.replace(z,"/");return t}function i(t){var e=t.length-1,n=t.charAt(e);return"#"===n?t.substring(0,e):".js"===t.substring(e-2)||t.indexOf("?")>0||"/"===n?t:t+".js"}function c(t){var e=b.alias;return e&&L(e[t])?e[t]:t}function s(t){var e,n=b.paths;return n&&(e=t.match(O))&&L(n[e[1]])&&(t=n[e[1]]+e[2]),t}function u(t){var e=b.vars;return e&&t.indexOf("{")>-1&&(t=t.replace(j,function(t,n){return L(e[n])?e[n]:t})),t}function l(t){var e=b.map,n=t;if(e)for(var o=0,a=e.length;a>o;o++){var r=e[o];if(n=k(r)?r(t)||t:t.replace(r[0],r[1]),n!==t)break}return n}function p(t,e){var n,o=t.charAt(0);if(q.test(t))n=t;else if("."===o)n=r((e?a(e):b.cwd)+t);else if("/"===o){var i=b.cwd.match(H);n=i?i[0]+t.substring(1):t}else n=b.base+t;return 0===n.indexOf("//")&&(n=location.protocol+n),n}function f(t,e){if(!t)return"";t=c(t),t=s(t),t=u(t),t=i(t);var n=p(t,e);return n=l(n)}function d(t){return t.hasAttribute?t.src:t.getAttribute("src",4)}function h(t,e,n){var o=D.createElement("script");if(n){var a=k(n)?n(t):n;a&&(o.charset=a)}g(o,e,t),o.async=!0,o.src=t,I=o,X?G.insertBefore(o,X):G.appendChild(o),I=null}function g(t,e,n){function o(){t.onload=t.onerror=t.onreadystatechange=null,b.debug||G.removeChild(t),t=null,e()}var a="onload"in t;a?(t.onload=o,t.onerror=function(){E("error",{uri:n,node:t}),o()}):t.onreadystatechange=function(){/loaded|complete/.test(t.readyState)&&o()}}function v(){if(I)return I;if(N&&"interactive"===N.readyState)return N;for(var t=G.getElementsByTagName("script"),e=t.length-1;e>=0;e--){var n=t[e];if("interactive"===n.readyState)return N=n}}function y(t){var e=[];return t.replace(V,"").replace(F,function(t,n,o){o&&e.push(o)}),e}function m(t,e){this.uri=t,this.dependencies=e||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!t.seajs){var w=t.seajs={version:"2.3.0"},b=w.data={},$=n("Object"),L=n("String"),A=Array.isArray||n("Array"),k=n("Function"),S=0,x=b.events={};w.on=function(t,e){var n=x[t]||(x[t]=[]);return n.push(e),w},w.off=function(t,e){if(!t&&!e)return x=b.events={},w;var n=x[t];if(n)if(e)for(var o=n.length-1;o>=0;o--)n[o]===e&&n.splice(o,1);else delete x[t];return w};var E=w.emit=function(t,e){var n=x[t];if(n){n=n.slice();for(var o=0,a=n.length;a>o;o++)n[o](e)}return w},T=/[^?#]*\//,_=/\/\.\//g,z=/\/[^/]+\/\.\.\//,C=/([^:/])\/+\//g,O=/^([^/:]+)(\/.+)$/,j=/{([^{]+)}/g,q=/^\/\/.|:\//,H=/^.*?\/\/.*?\//,D=document,B=location.href&&0!==location.href.indexOf("about:")?a(location.href):"",P=D.scripts,R=D.getElementById("seajsnode")||P[P.length-1],U=a(d(R)||B);w.resolve=f;var I,N,G=D.head||D.getElementsByTagName("head")[0]||D.documentElement,X=G.getElementsByTagName("base")[0];w.request=h;var M,F=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,V=/\\\\/g,Q=w.cache={},Z={},J={},K={},W=m.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};m.prototype.resolve=function(){for(var t=this,e=t.dependencies,n=[],o=0,a=e.length;a>o;o++)n[o]=m.resolve(e[o],t.uri);return n},m.prototype.load=function(){var t=this;if(!(t.status>=W.LOADING)){t.status=W.LOADING;var n=t.resolve();E("load",n);for(var o,a=t._remain=n.length,r=0;a>r;r++)o=m.get(n[r]),o.status<W.LOADED?o._waitings[t.uri]=(o._waitings[t.uri]||0)+1:t._remain--;if(0===t._remain)return t.onload(),e;var i={};for(r=0;a>r;r++)o=Q[n[r]],o.status<W.FETCHING?o.fetch(i):o.status===W.SAVED&&o.load();for(var c in i)i.hasOwnProperty(c)&&i[c]()}},m.prototype.onload=function(){var t=this;t.status=W.LOADED,t.callback&&t.callback();var e,n,o=t._waitings;for(e in o)o.hasOwnProperty(e)&&(n=Q[e],n._remain-=o[e],0===n._remain&&n.onload());delete t._waitings,delete t._remain},m.prototype.fetch=function(t){function n(){w.request(i.requestUri,i.onRequest,i.charset)}function o(){delete Z[c],J[c]=!0,M&&(m.save(r,M),M=null);var t,e=K[c];for(delete K[c];t=e.shift();)t.load()}var a=this,r=a.uri;a.status=W.FETCHING;var i={uri:r};E("fetch",i);var c=i.requestUri||r;return!c||J[c]?(a.load(),e):Z[c]?(K[c].push(a),e):(Z[c]=!0,K[c]=[a],E("request",i={uri:r,requestUri:c,onRequest:o,charset:b.charset}),i.requested||(t?t[i.requestUri]=n:n()),e)},m.prototype.exec=function(){function t(e){return m.get(t.resolve(e)).exec()}var n=this;if(n.status>=W.EXECUTING)return n.exports;n.status=W.EXECUTING;var a=n.uri;t.resolve=function(t){return m.resolve(t,a)},t.async=function(e,n){return m.use(e,n,a+"_async_"+o()),t};var r=n.factory,i=k(r)?r(t,n.exports={},n):r;return i===e&&(i=n.exports),delete n.factory,n.exports=i,n.status=W.EXECUTED,E("exec",n),i},m.resolve=function(t,e){var n={id:t,refUri:e};return E("resolve",n),n.uri||w.resolve(n.id,e)},m.define=function(t,n,o){var a=arguments.length;1===a?(o=t,t=e):2===a&&(o=n,A(t)?(n=t,t=e):n=e),!A(n)&&k(o)&&(n=y(""+o));var r={id:t,uri:m.resolve(t),deps:n,factory:o};if(!r.uri&&D.attachEvent){var i=v();i&&(r.uri=i.src)}E("define",r),r.uri?m.save(r.uri,r):M=r},m.save=function(t,e){var n=m.get(t);n.status<W.SAVED&&(n.id=e.id||t,n.dependencies=e.deps||[],n.factory=e.factory,n.status=W.SAVED,E("save",n))},m.get=function(t,e){return Q[t]||(Q[t]=new m(t,e))},m.use=function(e,n,o){var a=m.get(o,A(e)?e:[e]);a.callback=function(){for(var e=[],o=a.resolve(),r=0,i=o.length;i>r;r++)e[r]=Q[o[r]].exec();n&&n.apply(t,e),delete a.callback},a.load()},w.use=function(t,e){return m.use(t,e,b.cwd+"_use_"+o()),w},m.define.cmd={},t.define=m.define,w.Module=m,b.fetchedList=J,b.cid=o,w.require=function(t){var e=m.get(m.resolve(t));return e.status<W.EXECUTING&&(e.onload(),e.exec()),e.exports},b.base=U,b.dir=U,b.cwd=B,b.charset="utf-8",w.config=function(t){for(var e in t){var n=t[e],o=b[e];if(o&&$(o))for(var a in n)o[a]=n[a];else A(o)?n=o.concat(n):"base"===e&&("/"!==n.slice(-1)&&(n+="/"),n=p(n)),b[e]=n}return E("config",t),w}}}(this),function(){function t(t){c[t.name]=t}function e(t){return t&&c.hasOwnProperty(t)}function n(t){for(var n in c)if(e(n)){var o=","+c[n].ext.join(",")+",";if(o.indexOf(","+t+",")>-1)return n}}function o(t,e){var n=i.XMLHttpRequest?new i.XMLHttpRequest:new i.ActiveXObject("Microsoft.XMLHTTP");return n.open("GET",t,!0),n.onreadystatechange=function(){if(4===n.readyState){if(n.status>399&&n.status<600)throw new Error("Could not load: "+t+", status = "+n.status);e(n.responseText)}},n.send(null)}function a(t){t&&/\S/.test(t)&&(i.execScript||function(t){(i.eval||eval).call(i,t)})(t)}function r(t){return t.replace(/(["\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")}var i=window,c={},s={};t({name:"text",ext:[".tpl",".html"],exec:function(t,e){a('define("'+t+'#", [], "'+r(e)+'")')}}),t({name:"json",ext:[".json"],exec:function(t,e){a('define("'+t+'#", [], '+e+")")}}),t({name:"handlebars",ext:[".handlebars"],exec:function(t,e){var n=['define("'+t+'#", ["handlebars"], function(require, exports, module) {','  var source = "'+r(e)+'"','  var Handlebars = require("handlebars")["default"]',"  module.exports = function(data, options) {","    options || (options = {})","    options.helpers || (options.helpers = {})","    for (var key in Handlebars.helpers) {","      options.helpers[key] = options.helpers[key] || Handlebars.helpers[key]","    }","    return Handlebars.compile(source)(data, options)","  }","})"].join("\n");a(n)}}),seajs.on("resolve",function(t){var o=t.id;if(!o)return"";var a,r;(r=o.match(/^(\w+)!(.+)$/))&&e(r[1])?(a=r[1],o=r[2]):(r=o.match(/[^?]+(\.\w+)(?:\?|#|$)/))&&(a=n(r[1])),a&&-1===o.indexOf("#")&&(o+="#");var i=seajs.resolve(o,t.refUri);a&&(s[i]=a),t.uri=i}),seajs.on("request",function(t){var e=s[t.uri];e&&(o(t.requestUri,function(n){c[e].exec(t.uri,n),t.onRequest()}),t.requested=!0)}),define("seajs/seajs-text/1.1.1/seajs-text-debug",[],{})}(),window.debug=function(t,e){var n,o;if(CONST.DEBUG_CONSOLE)try{n=Application.extend({type:"console"},e),o="function"==typeof t?t():t,o&&o.length>0&&("error"===n.type?console.error(o):"alert"===n.type?alert(o):console.log(o))}catch(a){}},function(){var t,e;!function(n,o){function a(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function r(){}var i=a("Function"),c={};r.prototype.exec=function(){function t(t){return r.get(t).exec()}var e=this;if(this.execed)return e.exports;this.execed=!0;var n=e.factory,a=i(n)?n(t,e.exports={},e):n;return a===o&&(a=e.exports),delete e.factory,e.exports=a,a},t=function(t,e,n){var o={id:t,deps:e,factory:n};r.save(o)},r.save=function(t){var e=r.get(t.id);e.id=t.id,e.dependencies=t.deps,e.factory=t.factory},r.get=function(t){return c[t]||(c[t]=new r)},e=function(t){var e=r.get(t);return e.execed||e.exec(),e.exports}}(this)}();var Application=function(t){this.options=t,this.initialize.apply(this,arguments)};Application.version="00111114",Application.each=function(t,e){var n,o;if(null==t)return t;if(t.length===+t.length)for(n=0,o=t.length;o>n&&e(t[n],n,t)!==!1;n++);else{var a=Object.keys(t);for(n=0,o=a.length;o>n&&e(t[a[n]],a[n],t,n)!==!1;n++);}return t},Application.extend=function(t){return"undefined"==typeof t?t:(Array.prototype.slice.call(arguments,1).forEach(function(e){for(var n in e)t[n]=e[n]}),t)},Application.getValue=function(t,e){function n(t,e){return Application.each(e,function(o){return o in t?1!==e.length?(e.shift(),n(t[o],e),!1):void(a=t[o]):!1}),a}var o,a;return arguments.length<2||"string"!=typeof e?void console.error("参数不能少于2个， 且path为字符串"):(o=e.split("."),n(t,o))},Application.fromCharCode=function(t){try{return String.fromCharCode(t)}catch(e){}},Application.url=window.location.href,Application.prototype={initialize:function(){this.modules={},this.status={},this.templates={},this.cache={},this.topics={},this.subUid=-1,this.isLazyLoad=!1,this.lazyLoadCount=0},addModule:function(t,e){t in this.modules&&debug("【Module】已存在的模块："+t),this.modules[t]=e},getModules:function(){return this.modules},addStatus:function(t,e){this.status[t]=e},getStatus:function(t){return this.status[t]},getAllStatus:function(){return this.status},addTemplate:function(t,e){t in this.templates&&debug("【Template】已存在的模板："+t),this.templates[t]=e},getTemplates:function(){return this.templates},trigger:function(t,e){var n=this;return this.topics[t]?(setTimeout(function(){for(var o=n.topics[t],a=o?o.length:0;a--;)o[a].func(t,e)},0),!0):!1},on:function(t,e){this.topics[t]||(this.topics[t]=[]);var n=(++this.subUid).toString();return this.topics[t].push({token:n,func:e}),n},off:function(t){for(var e in this.topics)if(this.topics[e])for(var n=0,o=this.topics[e].length;o>n;n++)if(this.topics[e][n].token===t)return this.topics[e].splice(n,1),t;return!1},addCache:function(t,e){this.cache[t]=e},getCache:function(t){return this.cache[t]},addHash:function(t){localStorage._currentHash=t,window.location.hash=t},getCurrentHash:function(){var t=localStorage._currentHash;return t&&-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),t},setBackPage:function(t){localStorage.backPage=t},getBackPage:function(){var t=localStorage.backPage,e=t;return"false"===t&&(e=App._Stack.getBefore()?App._Stack.getBefore()[0]:"home"),localStorage.backPage=!1,e},hasBackPage:function(){return localStorage.backPage},cleanStack:function(){App._Stack.destroy(),App._CustomStack.length=0},render:function(t){t=Application.extend({empty:!1},t);var e=$(t.render,$(t.page||"body")),n=t.handlebars.compile(t.template||e.html());t.empty&&e.empty();var o=$(n(t.data));t.callback&&t.callback.call(null,o),e.append(o)},getUrlParam:function(t,e){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)");"undefined"!=typeof e&&(location.href.indexOf("?")<location.href.indexOf("#/")&&(e=e.replace("html?","")),e=e.substring(e.indexOf("?"),e.length));var o=e||window.location.search,a=o.substr(1).match(n);return null!=a?unescape(a[2]):null},autoHide:function(t,e){debug("【Util】App.autoHide:");try{var n=$(".app-content",$(t)),o=!1;$(".app-content",$(t)).get(0)&&$(".app-content",$(t)).get(0).addEventListener("scroll",function(){var t=n.scrollTop();t>0&&!o?(o=!0,e.hide&&e.hide.call(this,t)):0===t&&o&&(o=!1,e.show&&e.show.call(this,t))})}catch(a){debug("【Error】"+a)}},scroll:function(t,e,n){debug("【Util】App.scroll:"+t);try{var o=$(".app-content",$(n)),a=parseInt(o.scrollTop()),r=0,i=5;t=parseInt(t),e/=i;var c=setInterval(function(){r++,o.scrollTop((t-a)/e*r+a),r>=e&&clearInterval(c)},i)}catch(s){debug("【Error】"+s)}},initLazyLoad:function(t){var e=this;this.isLazyLoad||(this.isLazyLoad=!0,setTimeout(function(){var n=$(".app-content",$(t)),o=$(".lazy",$(n));o.size()>0&&!o.lazyload?seajs.use(["LazyLoad"],function(){try{seajs.require("LazyLoad"),o.lazyload({container:n}),debug("【LazyLoad】initLazyLoad")}catch(a){var r=seajs.Module,i=seajs.resolve("LazyLoad");try{delete r.cache[i]}catch(a){delete seajs.cache[i]}if(10===e.lazyLoadCount)return void window.location.reload();e.lazyLoadCount++,setTimeout(function(){App.resetLazyLoad(t)},50),debug("【Error】: lazyload is not find !")}}):(debug("【LazyLoad】initLazyLoad"),o.lazyload({container:n}))},0))},resetLazyLoad:function(t){$(t).find(".lazy").size()>0&&(debug("【LazyLoad】resetLazyLoad"),App.disableLazyLoad(),App.initLazyLoad(t))},disableLazyLoad:function(){this.isLazyLoad=!1},isLazyLoad:function(){return this.isLazyLoad},addLoading:function(){try{window.$loading&&window.$loading.remove(),window.$loading=$('<div class="loading"></div>'),$("body").append(window.$loading)}catch(t){debug("【Error】"+t)}return window.$loading},getLoading:function(){return $("")},removeLoading:function(){window.$loading?window.$loading.remove():$(".loading").remove()},addTool:function(t,e){try{window.$tool&&window.$tool.remove(),window.$tool=$(App.$tool.clone()),window.$tool.css("display","blcok"),window.$tool.find(".tool-reflesh").attr("data-page",e),window.$tool.find(".tool-totop").off().on("click",function(e){return e.preventDefault(),App.scroll(0,100,t),!1}),window.$tool.find(".tool-reflesh").off().on("click",function(t){if(t.preventDefault(),$(this).attr("data-page").length>0){var e=App._Stack.getLast();App._Stack.pop(),App.load(e[0],e[3])}else window.location.reload();return!1}),"home"===window.$tool.find(".tool-reflesh").attr("data-page")&&window.$tool.find(".tool-back").remove(),window.$tool.find(".tool-back").off().on("click",function(t){return t.preventDefault(),App.back(App.getBackPage),!1}),$(t).append(window.$tool)}catch(n){}return window.$tool},initPageReady:function(t){window.onhashchange=function(){try{if(debug("【Hash】onhashchange: "+localStorage._currentHash+" -> "+location.hash),localStorage._currentHash){if(localStorage._currentHash===location.hash)return;if(location.hash.length>0){var e=location.hash.substring(2,location.hash.length);if(t._CustomStack&&t._CustomStack.length>0){var n=t._CustomStack.pop();return void t.load(n[0],n[1])}"undefined"===e&&t.load("home");var o=$(".app-back");o.size()>0?o.click():(debug("【Hash】size stack is 0"),t.load("home"))}}}catch(a){t._Stack.destroy(),t.load("home")}},t.enableDragTransition();try{if(location.hash.length>0&&"#/home"!==location.hash)if(t._CustomStack=t._Stack.getRestoreStacks(),-1!==location.href.indexOf("?")&&-1!==location.hash.indexOf("?"))t.load(location.hash.substring(2,location.hash.indexOf("?")));else if(0===t._CustomStack.length)t.load("home");else{var e=t._CustomStack.pop();t.load(e[0],e[1])}else t._Stack.destroy(),t.load("home")}catch(n){t._Stack.destroy(),t.load("home")}},initContent:function(t,e){try{$(t).find(".app-content").height($(window).height()-(e||0)),$(t).on("appShow",function(){$(t).find(".app-content").height($(window).height()-(e||0))})}catch(n){debug("【Error】App.initContent"+n)}},initPage:function(t){try{setTimeout(function(){App._Pages.fixContent(t)},0),setTimeout(function(){App._Scroll.setup(t)},0),setTimeout(function(){App.initClick(t)},300),setTimeout(function(){var e=$(t).find(".app-content");if(e.height()>$(window).height()){var n=$(t).find(".app-topbar");App.initContent(t,n.size()>0?n.eq(0).height():0)}},5e3)}catch(e){debug("【Error】: App.initPage"+e)}},getElementTop:function(t){for(var e=t.offsetTop,n=t.offsetParent;null!==n&&!$(n).hasClass("app-content");)e+=n.offsetTop,n=n.offsetParent;return e},offsetRelative:function(){!function(t){t.fn.offsetRelative=function(e){var n=t(e),o=this.offset(),a=n.offset();return o.top-=a.top-n.scrollTop(),o.left-=a.left-n.scrollLeft(),o},t.fn.positionRelative=function(e){return t(this).offsetRelative(e)}}(Zepto)},initInput:function(t){try{setTimeout(function(){var e=$(t).find(".app-content"),n=$("input, textarea",e),o=$(".app-topbar"),a=$(".app-bottombar");n.each(function(){$(this).off("click").on("click",function(){o.removeClass("brand-top-auto-hide"),a.removeClass("brand-bottom-auto-show");var e=0;$(this).offsetRelative||App.offsetRelative(),e=$(this).offsetRelative?$(this).offsetRelative(".app-content").top:App.getElementTop($(this).get(0)),App.scroll(e-90,100,t),console.log(e)})})},1e3)}catch(e){debug(e)}},initLoad:function(t,e,n){if(t)try{App.addLoading(),e.page&&App.addHash("#/"+e.page),$(t).on("appForward",function(){setTimeout(function(){App.removeLoading()},500),e.appForward&&e.appForward.call(n,t)}),$(t).on("appLayout",function(){e.appLayout&&e.appLayout.call(n,t)}),$(t).on("appShow",function(){debug("【Init】appShow"),debug("【Stack】Stack size: "+App._Stack.size()),e.appShow&&e.appShow.call(n,t)}),$(t).on("appReady",function(){debug("【Init】appReady"),App.removeLoading(),App.initPage(t),App.addTool(t,e.page),App.initInput(t),App.off("queryEvent"),App.on("queryEvent",function(){debug("【QueryTrigger】"),App.initPage(t)}),e.appReady&&e.appReady.call(n,t)}),$(t).on("appBeforeBack",function(){e.appBeforeBack&&e.appBeforeBack.call(n,t)}),$(t).on("appBack",function(){e.appBack&&e.appBack.call(n,t)}),$(t).on("appHide",function(){App.removeLoading(),e.appHide&&e.appHide.call(n,t)}),$(t).on("appDestroy",function(){App.removeLoading(),e.appDestroy&&e.appDestroy.call(n,t)}),e&&e.transition&&n&&(n.transition=e.transition)}catch(o){debug("【Error】"+o)}}};